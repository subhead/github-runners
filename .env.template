# GitHub Actions Self-Hosted Runner - Environment Variables Template
# ============================================================================
# This template provides all available environment variables for configuring
# GitHub Actions self-hosted runners. Copy this file to .env and fill in
# your values.
#
# For Python-based projects (multiple repositories):
# - Use GITHUB_OWNER for organization-level runner (recommended)
# - Use GITHUB_REPOSITORY for repository-specific runner
#
# SECURITY: Never commit .env files to version control!
# Add .env* to your .gitignore file.
# ============================================================================

# =============================================================================
# REQUIRED - GITHUB CONFIGURATION
# =============================================================================

# GitHub authentication token (REQUIRED - One or both repositories/organization)
# Options:
#   - Personal Access Token (Classic): Needs repo or admin:org scope
#   - Fine-grained Token: Repository/Actions permissions
#   - Installation Token: For GitHub Apps
# Format: ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx OR github_pat_xxxxxxxxxxx
# Example: GITHUB_TOKEN=ghp_aBcDeFgHiJkLmNoPqRsTuVwXyZ123456789
GITHUB_TOKEN=YOUR_GITHUB_TOKEN_HERE

# Repository or Organization Configuration (REQUIRED - Choose ONE)
# ============================================================================
# Option A: Organization Runner (RECOMMENDED for multiple repositories)
# This runner will be available to ALL repositories in the organization
# Example: GITHUB_OWNER=my-organization
# GITHUB_OWNER=YOUR_ORGANIZATION_NAME

# Option B: Repository-Specific Runner (For isolation)
# This runner will only be available to this specific repository
# Example: GITHUB_REPOSITORY=my-organization/my-repository
# GITHUB_REPOSITORY=YOUR_ORGANIZATION/YOUR_REPOSITORY

# =============================================================================
# OPTIONAL - RUNNER CONFIGURATION
# =============================================================================

# Unique identifier for this runner instance
# Default: Auto-generated (e.g., python-runner-01)
# Examples: org-python-runner-01, staging-runner-01, prod-api-runner
RUNNER_NAME=python-runner-01

# Labels for workflow targeting (comma-separated)
# Target in workflows: runs-on: [self-hosted, linux, python]
# Default: linux
# Examples:
#   - linux,python (basic Python)
#   - linux,python,ml,ai (ML/AI focused)
#   - linux,python,production (production environment)
RUNNER_LABELS=linux,python,ml,ai,production

# Runner group (Organization runners only)
# Create groups in GitHub: Settings ‚Üí Actions ‚Üí Runner groups
# Useful for access control and organization
# Default: Default
# Examples: python-team, data-team, production
RUNNER_GROUP=Default

# Working directory for the runner
# Relative to runner installation or absolute path
# Default: _work
# Examples: _work, /mnt/data/work
RUNNER_WORKDIR=_work

# Security: Run as non-root user (RECOMMENDED)
# Default: false
# Set to true only if workflow requires root privileges
RUNNER_AS_ROOT=false

# Allow replacing existing runner with same name
# Default: false
# Set to true for automated deployments (CI/CD)
# Warning: Can disrupt running workflows
RUNNER_REPLACE_EXISTING=false

# =============================================================================
# OPTIONAL - PYTHON-SPECIFIC CONFIGURATION
# =============================================================================

# Disable Python output buffering for real-time logs
# Default: 1 (enabled)
# Recommended: Always keep enabled for CI/CD
PYTHONUNBUFFERED=1

# Prevent writing .pyc bytecode files
# Default: 1 (enabled)
# Reduces disk I/O and storage
PYTHONDONTWRITEBYTECODE=1

# Pip package caching
# Default: off (caching enabled)
# Recommended: off for faster builds
PIP_NO_CACHE_DIR=off

# Disable pip version check
# Default: on (disabled)
# Recommended: on for faster operations
PIP_DISABLE_PIP_VERSION_CHECK=on

# Virtual environment path
# Default: /home/runner/.venv
# Used for creating virtual environments
VENV_PATH=/home/runner/.venv

# =============================================================================
# OPTIONAL - RESOURCE LIMITS (Docker Compose specific)
# =============================================================================

# CPU cores (can be fractional)
# Default: 1.0
# Examples: 0.5, 1.0, 2.0, 4.0
CPU_LIMIT=3.0

# Memory limit
# Default: 2g
# Examples: 1g, 2g, 4g, 8g, 16g
MEMORY_LIMIT=6g

# Network mode
# Default: bridge
# Options: bridge, host, none
NETWORK_MODE=bridge

# =============================================================================
# OPTIONAL - ADVANCED CONFIGURATION
# =============================================================================

# Logging level
# Default: INFO
# Options: DEBUG, INFO, WARN, ERROR
LOG_LEVEL=INFO

# Health check interval
# Default: 30s
# Examples: 30s, 1m, 5m
HEALTH_CHECK_INTERVAL=30s

# API timeout (seconds)
# Default: 30
# Examples: 30, 60, 120
TIMEOUT_SECONDS=30

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# Example 1: Organization Runner (Python) - RECOMMENDED
# ------------------------------------------------------
# GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# GITHUB_OWNER=my-organization
# RUNNER_NAME=org-python-runner-01
# RUNNER_LABELS=linux,python,ml,ai,production
# RUNNER_GROUP=python-team
# CPU_LIMIT=3.0
# MEMORY_LIMIT=6g
# PYTHONUNBUFFERED=1
# PYTHONDONTWRITEBYTECODE=1

# Example 2: Repository-Specific Runner (Isolated)
# ------------------------------------------------
# GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# GITHUB_REPOSITORY=my-organization/api-server
# RUNNER_NAME=api-server-runner
# RUNNER_LABELS=linux,python,fastapi,api
# CPU_LIMIT=2.0
# MEMORY_LIMIT=4g

# Example 3: Development/Testing
# -------------------------------
# GITHUB_TOKEN=ghp_TEST_TOKEN_1234567890abcdef
# GITHUB_OWNER=dev-org
# RUNNER_NAME=dev-python-runner-01
# RUNNER_LABELS=linux,python,development,testing
# RUNNER_GROUP=dev-team
# RUNNER_REPLACE_EXISTING=true
# LOG_LEVEL=DEBUG
# CPU_LIMIT=1.5
# MEMORY_LIMIT=3g

# Example 4: ML/Data Science (High Resources)
# --------------------------------------------
# GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# GITHUB_OWNER=data-team-org
# RUNNER_NAME=ml-runner-gpu-01
# RUNNER_LABELS=linux,python,ml,ai,data-science,deep-learning,gpu,production
# RUNNER_GROUP=ml-team
# VENV_PATH=/home/runner/.venv-ml
# CPU_LIMIT=4.0
# MEMORY_LIMIT=16g

# =============================================================================
# SECURITY BEST PRACTICES
# =============================================================================

# 1. NEVER commit .env files to version control
#    Add to .gitignore: echo ".env*" >> .gitignore

# 2. Set secure file permissions
#    chmod 600 .env

# 3. Use fine-grained tokens with minimal permissions
#    - Repository runners: "Actions" permission only
#    - Organization runners: "Actions" permission only

# 4. Rotate tokens regularly (every 90 days)

# 5. Use environment variables for CI/CD
#    export GITHUB_TOKEN=${{ secrets.GITHUB_TOKEN }}

# 6. Consider using Docker secrets for production
#    docker secret create github_token ...

# =============================================================================
# TROUBLESHOOTING
# =============================================================================

# Issue: "Environment variable is required" error
# Solution: Check .env file location and variable names (CASE-SENSITIVE)

# Issue: Runner not appearing in GitHub
# Solution: Check token permissions and API access
#   curl -H "Authorization: token ${GITHUB_TOKEN}" \
#        https://api.github.com/user/repos

# Issue: Out of memory
# Solution: Increase MEMORY_LIMIT (e.g., MEMORY_LIMIT=8g)

# Issue: Slow builds
# Solution: Ensure pip cache is enabled (PIP_NO_CACHE_DIR=off)
#           Check volumes are mounted in docker-compose

# =============================================================================
# DEPLOYMENT COMMANDS
# =============================================================================

# Deploy with .env file:
# docker-compose -f docker-compose/linux-python.yml up -d

# Deploy with custom .env file:
# docker-compose --env-file .env.prod -f docker-compose/linux-python.yml up -d

# Deploy without .env file (use environment variables):
# export GITHUB_TOKEN=ghp_xxxx && export GITHUB_OWNER=my-org
# docker-compose -f docker-compose/linux-python.yml up -d

# Deploy multiple runners (each with own .env):
# for env_file in .env.runner*; do
#   export $(cat $env_file | xargs)
#   docker-compose -f docker-compose/linux-python.yml up -d
#   unset $(cat $env_file | sed 's/=.*//' | xargs)
# done

# =============================================================================
# AVAILABLE DOCKER COMPOSE FILES
# =============================================================================

# For Python projects (recommended):
#   docker-compose/linux-python.yml      (Python only, 450MB)
#   docker-compose/linux-base.yml        (Minimal, 300MB)
#   docker-compose/linux-web.yml         (Python + Node.js + Go, 580MB)
#   docker-compose/linux-full.yml        (All languages, 2.5GB)
#
# For C++ projects:
#   docker-compose/linux-cpp.yml         (C++ only, 550MB)

# =============================================================================
# FOR MORE INFORMATION
# =============================================================================

# See README.md for complete documentation:
#   - Section: "üîß Environment Variables"
#   - Section: "üìã Complete Example .env Files"
#   - Section: "üîí Security Best Practices"
#   - Section: "üìù Troubleshooting Environment Variables"

# See docs/linux-modular/ for additional guides:
#   - docs/linux-modular/base-guide.md
#   - docs/linux-modular/language-packs.md
#   - docs/linux-modular/custom-combinations.md
#   - docs/linux-modular/migration.md

# =============================================================================
# READY TO DEPLOY?
# =============================================================================

# 1. Copy this file: cp .env.template .env
# 2. Edit .env with your values
# 3. Deploy: docker-compose -f docker-compose/linux-python.yml up -d
# 4. Verify: docker-compose -f docker-compose/linux-python.yml logs -f
#
# Your runner should appear in GitHub within 1-2 minutes!

# ============================================================================
# END OF TEMPLATE
# ============================================================================
